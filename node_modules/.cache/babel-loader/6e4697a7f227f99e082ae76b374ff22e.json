{"ast":null,"code":"var _jsxFileName = \"/home/fernando/Documentos/projects-turma23/sd-023-b-project-trybetunes/src/components/MusicCard.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class MusicCard extends Component {\n  constructor() {\n    super();\n\n    this.saveSong = async music => {\n      await addSong(music);\n      const favorites = await getFavoriteSongs();\n      this.setState(() => ({\n        loading: false,\n        fav: favorites\n      }));\n    };\n\n    this.deletFavoriteSong = async music => {\n      removeSong(music);\n      const favorite = await getFavoriteSongs();\n      this.setState({\n        loading: false,\n        fav: favorite\n      });\n    };\n\n    this.manageCheck = async (music, _ref) => {\n      let {\n        target\n      } = _ref;\n      this.setState({\n        loading: true\n      });\n\n      if (target.checked) {\n        await this.saveSong(music);\n      } else {\n        await this.deletFavoriteSong(music);\n      }\n    };\n\n    this.state = {\n      loading: false,\n      fav: []\n    };\n  }\n\n  async componentDidMount() {\n    const favSongs = await getFavoriteSongs();\n    this.setState({\n      fav: favSongs\n    });\n  }\n\n  render() {\n    const {\n      loading,\n      fav\n    } = this.state;\n    const {\n      musics\n    } = this.props;\n    const tracks = musics.map((music, index) => {\n      if (!music.tracId) {\n        index > 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Nome da m\\xFAsica:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: music.trackName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n            \"data-testid\": \"audio-component\",\n            src: music.previewUrl,\n            controls: true,\n            children: [/*#__PURE__*/_jsxDEV(\"track\", {\n              kind: \"captions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n              children: \"audio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: music.trackId,\n            \"data-testid\": `checkbox-music-${music.trackId}`,\n            children: [\"Favorita\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: music.trackId,\n              onChange: e => this.manageCheck(music, e),\n              checked: fav.some(m => m.trackId === music.trackId)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this);\n      }\n    });\n    return loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this) : tracks;\n  }\n\n}\nMusicCard.propTypes = {\n  musics: PropTypes.shape({\n    map: PropTypes.string\n  }).isRequired\n};","map":{"version":3,"names":["React","Component","PropTypes","addSong","getFavoriteSongs","removeSong","Loading","MusicCard","constructor","saveSong","music","favorites","setState","loading","fav","deletFavoriteSong","favorite","manageCheck","target","checked","state","componentDidMount","favSongs","render","musics","props","tracks","map","index","tracId","trackName","previewUrl","trackId","e","some","m","propTypes","shape","string","isRequired"],"sources":["/home/fernando/Documentos/projects-turma23/sd-023-b-project-trybetunes/src/components/MusicCard.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\n\nexport default class MusicCard extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      fav: [],\n    };\n  }\n\n  async componentDidMount() {\n    const favSongs = await getFavoriteSongs();\n    this.setState({\n      fav: favSongs,\n    });\n  }\n\n  saveSong = async (music) => {\n    await addSong(music);\n    const favorites = await getFavoriteSongs();\n    this.setState(() => ({\n      loading: false,\n      fav: favorites,\n    }));\n  }\n\n  deletFavoriteSong = async (music) => {\n    removeSong(music);\n    const favorite = await getFavoriteSongs();\n    this.setState({\n      loading: false,\n      fav: favorite,\n    });\n  }\n\n  manageCheck = async (music, { target }) => {\n    this.setState({\n      loading: true,\n    });\n    if (target.checked) {\n      await this.saveSong(music);\n    } else {\n      await this.deletFavoriteSong(music);\n    }\n  };\n\n  render() {\n    const { loading, fav } = this.state;\n    const { musics } = this.props;\n    const tracks = musics.map((music, index) => {\n      if (!music.tracId) {(\n        index > 0 && (\n          <section key={ index }>\n            <span>Nome da m√∫sica:</span>\n            <p>{ music.trackName }</p>\n            <audio data-testid=\"audio-component\" src={ music.previewUrl } controls>\n              <track kind=\"captions\" />\n              <code>audio</code>\n            </audio>\n            <label\n              htmlFor={ music.trackId }\n              data-testid={ `checkbox-music-${music.trackId}` }\n            >\n              Favorita\n              <input\n                type=\"checkbox\"\n                id={ music.trackId }\n                onChange={ (e) => this.manageCheck(music, e) }\n                checked={ fav.some((m) => m.trackId === music.trackId) }\n              />\n            </label>\n            <hr />\n          </section>\n        ));\n      }\n    });\n\n    return (\n      loading ? <Loading /> : tracks\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  musics: PropTypes.shape({\n    map: PropTypes.string,\n  }).isRequired,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}