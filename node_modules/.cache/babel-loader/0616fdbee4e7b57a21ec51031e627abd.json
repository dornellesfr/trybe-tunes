{"ast":null,"code":"var _jsxFileName = \"/home/fernando/Documentos/projects-turma23/sd-023-b-project-trybetunes/src/components/MusicCard.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class MusicCard extends Component {\n  constructor() {\n    super();\n\n    this.saveSong = async music => {\n      await addSong(music);\n      const favorites = await getFavoriteSongs();\n      this.setState(() => ({\n        loading: false,\n        fav: favorites\n      }));\n    };\n\n    this.deletFavoriteSong = async music => {\n      await removeSong(music);\n      const favorite = await getFavoriteSongs();\n      this.setState({\n        loading: false,\n        fav: favorite\n      });\n    };\n\n    this.manageCheck = async (music, _ref) => {\n      let {\n        target\n      } = _ref;\n      this.setState({\n        loading: true\n      });\n\n      if (target.checked) {\n        await this.saveSong(music);\n      } else {\n        await this.deletFavoriteSong(music);\n      }\n    };\n\n    this.mapFunction = array => {\n      array.map((music, index) => /*#__PURE__*/_jsxDEV(\"section\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Nome da m\\xFAsica:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: music.trackName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          \"data-testid\": \"audio-component\",\n          src: music.previewUrl,\n          controls: true,\n          children: [/*#__PURE__*/_jsxDEV(\"track\", {\n            kind: \"captions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"audio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: music.trackId,\n          \"data-testid\": `checkbox-music-${music.trackId}`,\n          children: [\"Favorita\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: music.trackId,\n            onChange: e => this.manageCheck(music, e),\n            checked: fav.some(m => m.trackId === music.trackId)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this));\n    };\n\n    this.showMusics = () => {\n      const {\n        musics\n      } = this.props;\n      const filteredTrack = musics.some(song => song.trackId);\n\n      if (filteredTrack) {\n        const filteredSongs = musics.filter(song => song.trackId);\n        const tracks = filteredSongs.map((music, index) => /*#__PURE__*/_jsxDEV(\"section\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Nome da m\\xFAsica:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: music.trackName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n            \"data-testid\": \"audio-component\",\n            src: music.previewUrl,\n            controls: true,\n            children: [/*#__PURE__*/_jsxDEV(\"track\", {\n              kind: \"captions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n              children: \"audio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: music.trackId,\n            \"data-testid\": `checkbox-music-${music.trackId}`,\n            children: [\"Favorita\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: music.trackId,\n              onChange: e => this.manageCheck(music, e),\n              checked: fav.some(m => m.trackId === music.trackId)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this));\n      } else {\n        const {\n          fav\n        } = this.state;\n        const tracks = fav.map((music, index) => /*#__PURE__*/_jsxDEV(\"section\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Nome da m\\xFAsica:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: music.trackName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n            \"data-testid\": \"audio-component\",\n            src: music.previewUrl,\n            controls: true,\n            children: [/*#__PURE__*/_jsxDEV(\"track\", {\n              kind: \"captions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n              children: \"audio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: music.trackId,\n            \"data-testid\": `checkbox-music-${music.trackId}`,\n            children: [\"Favorita\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: music.trackId,\n              onChange: e => this.manageCheck(music, e),\n              checked: fav.some(m => m.trackId === music.trackId)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this));\n      }\n    };\n\n    this.state = {\n      loading: false,\n      fav: []\n    };\n  }\n\n  async componentDidMount() {\n    const favSongs = await getFavoriteSongs();\n    this.setState({\n      fav: favSongs\n    });\n  }\n\n  render() {\n    const {\n      loading\n    } = this.state;\n    return loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }, this) : tracks;\n  }\n\n}\nMusicCard.propTypes = {\n  musics: PropTypes.shape({\n    map: PropTypes.string,\n    filter: PropTypes.string\n  })\n};","map":{"version":3,"names":["React","Component","PropTypes","addSong","getFavoriteSongs","removeSong","Loading","MusicCard","constructor","saveSong","music","favorites","setState","loading","fav","deletFavoriteSong","favorite","manageCheck","target","checked","mapFunction","array","map","index","trackName","previewUrl","trackId","e","some","m","showMusics","musics","props","filteredTrack","song","filteredSongs","filter","tracks","state","componentDidMount","favSongs","render","propTypes","shape","string"],"sources":["/home/fernando/Documentos/projects-turma23/sd-023-b-project-trybetunes/src/components/MusicCard.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\n\nexport default class MusicCard extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      fav: [],\n    };\n  }\n\n  async componentDidMount() {\n    const favSongs = await getFavoriteSongs();\n    this.setState({\n      fav: favSongs,\n    });\n  }\n\n  saveSong = async (music) => {\n    await addSong(music);\n    const favorites = await getFavoriteSongs();\n    this.setState(() => ({\n      loading: false,\n      fav: favorites,\n    }));\n  }\n\n  deletFavoriteSong = async (music) => {\n    await removeSong(music);\n    const favorite = await getFavoriteSongs();\n    this.setState({\n      loading: false,\n      fav: favorite,\n\n    });\n  }\n\n  manageCheck = async (music, { target }) => {\n    this.setState({\n      loading: true,\n    });\n    if (target.checked) {\n      await this.saveSong(music);\n    } else {\n      await this.deletFavoriteSong(music);\n    }\n  };\n\n  mapFunction = (array) => {\n    array.map((music, index) => (\n      (\n        <section key={ index }>\n          <span>Nome da música:</span>\n          <p>{ music.trackName }</p>\n          <audio data-testid=\"audio-component\" src={ music.previewUrl } controls>\n            <track kind=\"captions\" />\n            <code>audio</code>\n          </audio>\n          <label\n            htmlFor={ music.trackId }\n            data-testid={ `checkbox-music-${music.trackId}` }\n          >\n            Favorita\n            <input\n              type=\"checkbox\"\n              id={ music.trackId }\n              onChange={ (e) => this.manageCheck(music, e) }\n              checked={ fav.some((m) => m.trackId === music.trackId) }\n            />\n          </label>\n          <hr />\n        </section>\n      )));\n  }\n\n  showMusics = () => {\n    const { musics } = this.props;\n    const filteredTrack = musics.some((song) => song.trackId);\n    if (filteredTrack) {\n      const filteredSongs = musics.filter((song) => song.trackId);\n      const tracks = filteredSongs.map((music, index) => (\n        (\n          <section key={ index }>\n            <span>Nome da música:</span>\n            <p>{ music.trackName }</p>\n            <audio data-testid=\"audio-component\" src={ music.previewUrl } controls>\n              <track kind=\"captions\" />\n              <code>audio</code>\n            </audio>\n            <label\n              htmlFor={ music.trackId }\n              data-testid={ `checkbox-music-${music.trackId}` }\n            >\n              Favorita\n              <input\n                type=\"checkbox\"\n                id={ music.trackId }\n                onChange={ (e) => this.manageCheck(music, e) }\n                checked={ fav.some((m) => m.trackId === music.trackId) }\n              />\n            </label>\n            <hr />\n          </section>\n        )));\n    } else {\n      const { fav } = this.state;\n      const tracks = fav.map((music, index) => (\n        (\n          <section key={ index }>\n            <span>Nome da música:</span>\n            <p>{ music.trackName }</p>\n            <audio data-testid=\"audio-component\" src={ music.previewUrl } controls>\n              <track kind=\"captions\" />\n              <code>audio</code>\n            </audio>\n            <label\n              htmlFor={ music.trackId }\n              data-testid={ `checkbox-music-${music.trackId}` }\n            >\n              Favorita\n              <input\n                type=\"checkbox\"\n                id={ music.trackId }\n                onChange={ (e) => this.manageCheck(music, e) }\n                checked={ fav.some((m) => m.trackId === music.trackId) }\n              />\n            </label>\n            <hr />\n          </section>\n        )));\n    }\n  }\n\n  render() {\n    const { loading } = this.state;\n    return (\n      loading ? <Loading /> : tracks\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  musics: PropTypes.shape({\n    map: PropTypes.string,\n    filter: PropTypes.string,\n  }),\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}